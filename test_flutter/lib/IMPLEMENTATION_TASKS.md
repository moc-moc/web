# 実装タスクリスト

このファイルは、プロジェクトの全実装タスクを段階的にリスト化したものです。
完了したタスクにチェックを入れて進捗を管理してください。

---

## Phase 0: リファクタリング（既存コードの技術的負債解消）

### 抽象化の必要性
現在、`GoalDataManager`、`StreakDataManager`、`TotalDataManager`に重複コードが多数存在（各400-500行）。
DRY原則に従い、BaseDataManagerを作成して抽象化する。

### タスク
- [x] 0.1 既存DataManagerの重複コード分析（必要なコード・内容把握）
- [x] 0.2 BaseDataManager実装（lib/data/repositories/base/base_data_manager.dart）
- [ ] 0.3 BaseDataManagerの動作確認（ホーム画面でStreak/Totalデータ表示・Firestore接続確認）
- [ ] 0.4 GoalDataManagerをBaseDataManager継承にリファクタリング
- [ ] 0.5 GoalDataManagerの動作確認（目標画面で実際のGoalデータ表示・Firestore接続確認）
- [ ] 0.6 StreakDataManagerをBaseDataManager継承にリファクタリング
- [ ] 0.7 StreakDataManagerの動作確認（ホーム画面で継続日数表示・Firestore接続確認）
- [ ] 0.8 TotalDataManagerをBaseDataManager継承にリファクタリング
- [ ] 0.9 TotalDataManagerの動作確認（ホーム画面で総作業時間表示・Firestore接続確認）
- [ ] 0.10 リファクタリング後のコード行数確認（目標：70%削減）
- [ ] 0.11 `flutter analyze`でエラー0確認
- [ ] 0.12 `dart format`で自動フォーマット

**期待される成果**: 約1,200行 → 約300-400行（70%削減）

---

## Phase 1: データモデル拡張

### 1-1. Enumの追加・拡張
- [ ] 1.1.0 既存Enumの分析（DetectionItemの現状確認・追加要件把握）
- [ ] 1.1.1 DetectionItem enumにworkTime追加（lib/feature/goals/goal_data_manager.dart）
- [ ] 1.1.2 PeriodType enum作成（daily/weekly/monthly）
- [ ] 1.1.3 各enumのtoString/fromString実装
- [ ] 1.1.4 目標画面でenumの動作確認（Firestore接続）

### 1-2. Goalモデルの拡張
- [ ] 1.2.0 既存Goalモデルの分析（現状フィールド確認・追加要件把握）
- [ ] 1.2.1 Goalモデルにフィールド追加：periodType, isFixedStart, isFocusedOnly
- [ ] 1.2.2 Goal.freezed.dart, Goal.g.dart再生成（`flutter pub run build_runner build --delete-conflicting-outputs`）
- [ ] 1.2.3 GoalDataManagerのfromFirestore/toFirestore更新
- [ ] 1.2.4 目標画面で拡張後のGoalモデル動作確認（Firestore接続・新規Goal作成/取得）
- [ ] 1.2.5 既存のGoalデータのマイグレーション対応検討

### 1-3. TrackingSessionモデル作成
- [ ] 1.3.0 TrackingSessionの要件分析（必要なフィールド・データ型の把握）
- [ ] 1.3.1 TrackingSessionモデル実装（lib/feature/tracking/tracking_session_data.dart・Freezed使用）
- [ ] 1.3.2 必要なフィールド全て実装（id, userId, startTime, endTime, 各カテゴリーの時間など）
- [ ] 1.3.3 freezed/json_serializableの生成コード作成
- [ ] 1.3.4 トラッキング画面でTrackingSessionの動作確認（Firestore接続・セッション保存/取得）

### 1-4. DailyReportモデル作成
- [ ] 1.4.0 DailyReportの要件分析（必要なフィールド・データ型の把握）
- [ ] 1.4.1 DailyReportモデル実装（lib/feature/report/daily_report_data.dart・Freezed使用）
- [ ] 1.4.2 必要なフィールド全て実装（id, date, 各カテゴリーの集計時間など）
- [ ] 1.4.3 freezed/json_serializableの生成コード作成
- [ ] 1.4.4 レポート画面でDailyReportの動作確認（Firestore接続・1日分データ表示）

### 1-5. UserSettingsモデル作成
- [ ] 1.5.0 UserSettingsの要件分析（必要なフィールド・データ型の把握）
- [ ] 1.5.1 UserSettingsモデル実装（lib/feature/setting/user_settings_data.dart・Freezed使用）
- [ ] 1.5.2 必要なフィールド実装（userId, username, iconUrl, bio）
- [ ] 1.5.3 freezed/json_serializableの生成コード作成
- [ ] 1.5.4 設定画面でUserSettingsの動作確認（Firestore接続・設定保存/取得）

### 1-6. AppSettingsモデル作成
- [ ] 1.6.0 AppSettingsの要件分析（必要なフィールド・データ型の把握）
- [ ] 1.6.1 AppSettingsモデル実装（lib/feature/setting/app_settings_data.dart・Freezed使用）
- [ ] 1.6.2 必要なフィールド実装（表示名カスタマイズ、リセット時間）
- [ ] 1.6.3 freezed/json_serializableの生成コード作成
- [ ] 1.6.4 設定画面でAppSettingsの動作確認（Firestore接続・表示名変更反映）

### 1-7. NotificationSettingsモデル作成
- [ ] 1.7.0 NotificationSettingsの要件分析（必要なフィールド・データ型の把握）
- [ ] 1.7.1 NotificationSettingsモデル実装（lib/feature/setting/notification_settings_data.dart・Freezed使用）
- [ ] 1.7.2 必要なフィールド実装（通知時間、各通知のオン/オフ）
- [ ] 1.7.3 freezed/json_serializableの生成コード作成
- [ ] 1.7.4 通知設定画面でNotificationSettingsの動作確認（Firestore接続・設定保存/取得）

### 1-8. 週別・月別・年別レポートモデル作成
- [ ] 1.8.0 各レポートモデルの要件分析（Weekly/Monthly/Yearlyの必要フィールド把握）
- [ ] 1.8.1 WeeklyReportモデル実装（lib/feature/report/weekly_report_data.dart・Freezed使用）
- [ ] 1.8.2 MonthlyReportモデル実装（lib/feature/report/monthly_report_data.dart・Freezed使用）
- [ ] 1.8.3 YearlyReportモデル実装（lib/feature/report/yearly_report_data.dart・Freezed使用）
- [ ] 1.8.4 各レポートモデルのfreezed/json_serializable生成
- [ ] 1.8.5 レポート画面で各レポートの動作確認（Firestore接続・週/月/年データ表示）
- [ ] 1.8.6 MilestoneEventモデル作成（大台イベント記録、必要なら）

### 1-9. 既存モデルの修正
- [ ] 1.9.0 TotalDataの現状分析（現在のフィールド確認・変更影響範囲把握）
- [ ] 1.9.1 TotalDataのtotalWorkTimeMinutesをtotalWorkTimeSecondsに変更
- [ ] 1.9.2 TotalDataのfromFirestore/toFirestore更新
- [ ] 1.9.3 TotalDataManager内の関連メソッド更新
- [ ] 1.9.4 Total.freezed.dart, Total.g.dart再生成
- [ ] 1.9.5 ホーム画面で修正後のTotalDataの動作確認（Firestore接続・秒単位で正しく表示）
- [ ] 1.9.6 既存のTotalDataのマイグレーション対応検討

### 1-10. カウントダウンモデルの確認
- [ ] 1.10.0 CountdownDataの現状分析（既存フィールド確認・要件との差分把握）
- [ ] 1.10.1 現在の仕様で要件を満たせるか検証
- [ ] 1.10.2 必要に応じてフィールド追加・修正
- [ ] 1.10.3 目標画面でカウントダウン機能の動作確認（Firestore接続）

---

## Phase 2: DataManager作成

### 2-1. TrackingSessionDataManager作成
- [ ] 2.1.0 TrackingSessionDataManager要件分析（BaseDataManager継承方法・必要なカスタムメソッド把握）
- [ ] 2.1.1 TrackingSessionDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.1.2 日付範囲指定取得メソッド等のカスタムメソッド実装
- [ ] 2.1.3 トラッキング画面でTrackingSessionDataManagerの動作確認（Firestore接続・セッション保存/取得）

### 2-2. DailyReportDataManager作成
- [ ] 2.2.0 DailyReportDataManager要件分析（BaseDataManager継承方法・必要なカスタムメソッド把握）
- [ ] 2.2.1 DailyReportDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.2.2 日付範囲指定取得メソッドの実装
- [ ] 2.2.3 レポート画面でDailyReportDataManagerの動作確認（Firestore接続・日別データ表示）

### 2-2-2. WeeklyReportDataManager作成
- [ ] 2.2.4 WeeklyReportDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.2.5 週範囲指定取得メソッドの実装
- [ ] 2.2.6 レポート画面でWeeklyReportDataManagerの動作確認（Firestore接続・週別データ表示）

### 2-2-3. MonthlyReportDataManager作成
- [ ] 2.2.7 MonthlyReportDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.2.8 月範囲指定取得メソッドの実装
- [ ] 2.2.9 レポート画面でMonthlyReportDataManagerの動作確認（Firestore接続・月別データ表示）

### 2-2-4. YearlyReportDataManager作成
- [ ] 2.2.10 YearlyReportDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.2.11 年範囲指定取得メソッドの実装
- [ ] 2.2.12 レポート画面でYearlyReportDataManagerの動作確認（Firestore接続・年別データ表示）

### 2-3. UserSettingsDataManager作成
- [ ] 2.3.0 UserSettingsDataManager要件分析（BaseDataManager継承方法・必要なカスタムメソッド把握）
- [ ] 2.3.1 UserSettingsDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.3.2 設定画面でUserSettingsDataManagerの動作確認（Firestore接続・設定保存/取得）

### 2-4. AppSettingsDataManager作成
- [ ] 2.4.0 AppSettingsDataManager要件分析（BaseDataManager継承方法・必要なカスタムメソッド把握）
- [ ] 2.4.1 AppSettingsDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.4.2 設定画面でAppSettingsDataManagerの動作確認（Firestore接続・表示名変更反映）

### 2-5. NotificationSettingsDataManager作成
- [ ] 2.5.0 NotificationSettingsDataManager要件分析（BaseDataManager継承方法・必要なカスタムメソッド把握）
- [ ] 2.5.1 NotificationSettingsDataManager実装（BaseDataManager継承・fromFirestore/toFirestore含む）
- [ ] 2.5.2 通知設定画面でNotificationSettingsDataManagerの動作確認（Firestore接続・設定保存/取得）

---

## Phase 3: 実データでの動作確認（各画面統合テスト）

### 3-1. テストデータ作成・投入
- [ ] 3.1.0 テストデータ要件分析（各データモデルのサンプルデータ仕様把握）
- [ ] 3.1.1 ダミーのTrackingSessionデータ作成・Firestoreに保存（5-10セッション）
- [ ] 3.1.2 ダミーのDailyReportデータ作成・Firestoreに保存（7日分）
- [ ] 3.1.3 ダミーのWeekly/Monthly/YearlyReportデータ作成・Firestoreに保存
- [ ] 3.1.4 ダミーのGoalデータ作成・Firestoreに保存（3-5個、各期間タイプ）
- [ ] 3.1.5 ダミーのSettings系データ作成・Firestoreに保存

### 3-2. 各画面でのFirestore接続確認（Phase 1-2で個別確認済みの統合）
- [ ] 3.2.1 ホーム画面での統合確認（Streak, Total表示・リアルタイム更新）
- [ ] 3.2.2 目標画面での統合確認（Goal一覧・達成率・Countdown表示）
- [ ] 3.2.3 レポート画面での統合確認（Daily/Weekly/Monthly/Yearly表示・グラフ表示）
- [ ] 3.2.4 トラッキング画面での統合確認（TrackingSession保存・リアルタイム更新）
- [ ] 3.2.5 設定画面での統合確認（User/App/NotificationSettings保存/取得）

### 3-3. オフライン・同期テスト
- [ ] 3.3.1 オフライン時のデータ保存確認（各画面でローカル保存動作）
- [ ] 3.3.2 オフライン時のデータ取得確認（各画面でローカルから表示）
- [ ] 3.3.3 オンライン復帰時の同期確認（各画面でFirestore同期動作）
- [ ] 3.3.4 送信キューの動作確認（リトライ機能の実動作確認）
- [ ] 3.3.5 競合解決の動作確認（lastModified比較動作）

### 3-4. エラーハンドリング確認
- [ ] 3.4.1 ネットワークエラー時の挙動確認（各画面でエラー表示確認）
- [ ] 3.4.2 認証エラー時の挙動確認（ログアウト状態での動作）
- [ ] 3.4.3 データ形式エラー時の挙動確認（不正データでの動作）
- [ ] 3.4.4 リトライ機能の動作確認（失敗時の自動再試行）

---

## Phase 4: 計算ロジック実装

### 4-1. トラッキングデータ集計
- [ ] 4.1.0 集計ロジック要件分析（TrackingSession→DailyReport、日付跨ぎ処理等の仕様把握）
- [ ] 4.1.1 TrackingSession → DailyReport集計関数実装
- [ ] 4.1.2 複数セッションの合算ロジック実装
- [ ] 4.1.3 日付跨ぎの処理実装（リセット時間考慮）
- [ ] 4.1.4 トラッキング終了画面で集計動作確認（Firestore接続・DailyReport更新確認）
- [ ] 4.1.5 DailyReport → WeeklyReport集計関数実装
- [ ] 4.1.6 週の開始日設定対応（月曜 or 日曜 or カスタム）
- [ ] 4.1.7 DailyReport → MonthlyReport集計関数実装
- [ ] 4.1.8 月初めの処理実装
- [ ] 4.1.9 DailyReport → YearlyReport集計関数実装
- [ ] 4.1.10 年初めの処理実装
- [ ] 4.1.11 レポート画面で各集計の動作確認（Firestore接続・週/月/年レポート表示）

### 4-2. 目標達成判定
- [ ] 4.2.0 目標達成判定要件分析（判定条件・期間タイプ別処理の仕様把握）
- [ ] 4.2.1 目標達成判定関数実装（Goal + DailyReport/WeeklyReport/MonthlyReport）
- [ ] 4.2.2 達成率計算ロジック実装
- [ ] 4.2.3 「以上」「以下」判定の実装
- [ ] 4.2.4 期間タイプ別判定（daily/weekly/monthly）
- [ ] 4.2.5 週初め/月初めスタート・設定日からスタートの判定実装
- [ ] 4.2.6 連続達成回数の更新ロジック実装
- [ ] 4.2.7 目標未達成時の処理実装（連続達成リセット）
- [ ] 4.2.8 複数目標の一括判定関数実装
- [ ] 4.2.9 目標画面で達成判定の動作確認（Firestore接続・達成率表示・連続達成更新）

### 4-3. 継続日数管理
- [ ] 4.3.0 継続日数管理要件分析（リセット時間・前日判定等の仕様把握）
- [ ] 4.3.1 継続日数計算ロジック実装（リセット時間考慮）
- [ ] 4.3.2 最終トラッキング日との比較実装
- [ ] 4.3.3 継続日数リセット判定実装
- [ ] 4.3.4 最長記録更新ロジック実装
- [ ] 4.3.5 継続日数の更新関数実装
- [ ] 4.3.6 ホーム画面で継続日数の動作確認（Firestore接続・連続日数表示・リセット動作）

### 4-4. 大台イベント検出
- [ ] 4.4.0 大台イベント要件分析（閾値定義・検出タイミング等の仕様把握）
- [ ] 4.4.1 継続日数大台の閾値定義（配列作成）
- [ ] 4.4.2 継続日数大台イベント検出ロジック実装
- [ ] 4.4.3 集中時間大台の閾値定義（配列作成）
- [ ] 4.4.4 集中時間大台イベント検出ロジック実装
- [ ] 4.4.5 1年ごとの大台イベント検出実装
- [ ] 4.4.6 大台イベントの重複検出防止実装
- [ ] 4.4.7 イベント表示画面で大台イベントの動作確認（Firestore接続・イベント表示）

### 4-5. トラッキング終了時の処理
- [ ] 4.5.0 トラッキング終了処理要件分析（全処理フロー・実行順序の仕様把握）
- [ ] 4.5.1 TrackingSessionの保存処理実装
- [ ] 4.5.2 DailyReportの更新処理実装
- [ ] 4.5.3 TotalDataの更新処理実装
- [ ] 4.5.4 StreakDataの更新処理実装
- [ ] 4.5.5 目標達成判定の実行
- [ ] 4.5.6 大台イベント検出の実行
- [ ] 4.5.7 イベント表示フラグの設定
- [ ] 4.5.8 トラッキング終了画面で全処理の動作確認（Firestore接続・統合動作確認）

---

## Phase 5: Riverpod Provider実装

### 5-1. TrackingSession用Provider
- [ ] 5.1.1 TrackingSessionProvider実装（Riverpod Generator使用）
- [ ] 5.1.2 現在のセッション状態管理
- [ ] 5.1.3 セッション開始/終了の状態更新
- [ ] 5.1.4 リアルタイム計測時間の更新

### 5-2. Report用Provider
- [ ] 5.2.1 DailyReportProvider実装
- [ ] 5.2.2 指定日のレポート取得
- [ ] 5.2.3 日付範囲のレポート取得
- [ ] 5.2.4 WeeklyReportProvider実装
- [ ] 5.2.5 指定週のレポート取得
- [ ] 5.2.6 MonthlyReportProvider実装
- [ ] 5.2.7 指定月のレポート取得
- [ ] 5.2.8 YearlyReportProvider実装
- [ ] 5.2.9 指定年のレポート取得
- [ ] 5.2.10 レポートの自動更新（StreamProvider使用）

### 5-3. Goal用Provider
- [ ] 5.3.1 GoalListProvider実装
- [ ] 5.3.2 目標一覧の取得
- [ ] 5.3.3 目標追加/更新/削除
- [ ] 5.3.4 目標達成率の計算Provider

### 5-4. Settings用Provider
- [ ] 5.4.1 UserSettingsProvider実装
- [ ] 5.4.2 AppSettingsProvider実装
- [ ] 5.4.3 NotificationSettingsProvider実装
- [ ] 5.4.4 設定変更時の自動保存

### 5-5. Streak/Total用Provider
- [ ] 5.5.1 StreakDataProvider実装
- [ ] 5.5.2 TotalDataProvider実装
- [ ] 5.5.3 リアルタイム更新の実装

---

## Phase 6: UI実装 - レポート画面

### 6-1. レポート画面の基本構造
- [ ] 6.1.0 レポート画面要件分析（既存レイアウト確認・必要なUI要素把握）
- [ ] 6.1.1 上部バー（1日/1週間/1ヶ月/1年切り替え）実装
- [ ] 6.1.2 期間切り替えの状態管理
- [ ] 6.1.3 過去データへの遷移UI実装（スライド/ボタン）
- [ ] 6.1.4 レポート画面基本構造の動作確認（期間切り替え・データ表示）

### 6-2. 棒グラフ実装
- [ ] 6.2.1 グラフライブラリの選定（fl_chart等）
- [ ] 6.2.2 1日の棒グラフ実装（0-24時）
- [ ] 6.2.3 カテゴリー別の色分け実装
- [ ] 6.2.4 集中/非集中の色の濃淡実装（将来実装用）
- [ ] 6.2.5 1週間の棒グラフ実装
- [ ] 6.2.6 1ヶ月の棒グラフ実装
- [ ] 6.2.7 1年の棒グラフ実装
- [ ] 6.2.8 グラフのアニメーション実装
- [ ] 6.2.9 グラフのインタラクション実装（タップで詳細表示）

### 6-3. 円グラフ実装
- [ ] 6.3.1 1日の円グラフ実装
- [ ] 6.3.2 カテゴリー別の色分け実装
- [ ] 6.3.3 集中/非集中の色の濃淡実装（将来実装用）
- [ ] 6.3.4 円の中心に合計時間表示
- [ ] 6.3.5 各要素への線引きと時間表記実装
- [ ] 6.3.6 1週間/1ヶ月/1年の円グラフ実装
- [ ] 6.3.7 円グラフのアニメーション実装

### 6-4. その他の表示要素
- [ ] 6.4.1 継続日数の表示実装
- [ ] 6.4.2 集中作業時間合計の表示実装
- [ ] 6.4.3 各期間別の集計値表示
- [ ] 6.4.4 レスポンシブデザイン対応

### 6-5. レポート画面の統合
- [ ] 6.5.1 全要素の配置調整
- [ ] 6.5.2 データ取得エラー時のUI実装
- [ ] 6.5.3 ローディング表示実装
- [ ] 6.5.4 レポート画面の総合テスト

---

## Phase 7: UI実装 - 目標画面

### 7-1. 目標一覧表示
- [ ] 7.1.0 目標画面要件分析（既存UI確認・必要な表示要素把握）
- [ ] 7.1.1 やる気の出る名言のランダム表示実装
- [ ] 7.1.2 カウントダウン表示エリア実装
- [ ] 7.1.4 目標達成率円グラフの実装
- [ ] 7.1.5 複数目標の一覧表示
- [ ] 7.1.6 連続達成回数の表示
- [ ] 7.1.7 残り日数の表示（週間・月間目標）

### 7-2. 目標設定画面
- [ ] 7.2.0 目標設定画面要件分析（既存UI確認・必要な入力項目把握）
- [ ] 7.2.1 目標タイトル入力フォーム実装
- [ ] 7.2.3 検出項目選択UI実装（book/pc/smartphone/workTime）
- [ ] 7.2.4 期間選択UI実装（daily/weekly/monthly）
- [ ] 7.2.5 開始時期選択UI実装（週初め/月初め or 設定日から）
- [ ] 7.2.6 目標時間入力フォーム実装
- [ ] 7.2.7 比較タイプ選択UI実装（以上/以下）
- [ ] 7.2.8 集中時間のみチェックボックス実装（将来実装用、非表示）
- [ ] 7.2.9 入力バリデーション実装
- [ ] 7.2.10 目標保存処理実装
- [ ] 7.2.11 目標設定画面の動作確認

### 7-3. カウントダウン機能
- [ ] 7.3.1 カウントダウン設定画面実装
- [ ] 7.3.2 イベント名入力フォーム実装
- [ ] 7.3.3 日程選択UI実装
- [ ] 7.3.4 残り日数計算ロジック実装
- [ ] 7.3.5 カウントダウン表示の更新（日次）
- [ ] 7.3.6 カウントダウン終了イベントの検出

### 7-4. 目標画面の統合
- [ ] 7.4.1 目標追加ボタン（右下の＋ボタン）実装
- [ ] 7.4.2 目標編集機能実装
- [ ] 7.4.3 目標削除機能実装
- [ ] 7.4.4 目標画面の総合テスト

---

## Phase 8: UI実装 - トラッキング画面

### 8-1. トラッキングホーム画面
- [ ] 8.1.0 トラッキングホーム画面要件分析（既存UI確認・必要な表示要素把握）
- [ ] 8.1.1 プロフィールアイコン表示
- [ ] 8.1.3 設定ボタン実装
- [ ] 8.1.4 総合計集中時間の表示
- [ ] 8.1.5 継続日数の表示
- [ ] 8.1.6 今日の目標表示エリア実装
- [ ] 8.1.7 スタートボタン実装（大きく目立つデザイン）

### 8-2. トラッキング設定画面（検出前）
- [ ] 8.2.0 トラッキング設定画面要件分析（既存UI確認・必要な要素把握）
- [ ] 8.2.1 タグ一覧表示（将来実装用、今は非表示）
- [ ] 8.2.2 タグ追加UI実装（将来実装用、今は非表示）
- [ ] 8.2.3 スタートボタン実装

### 8-3. トラッキング中画面
- [ ] 8.3.0 トラッキング中画面要件分析（既存UI確認・必要な表示要素把握）
- [ ] 8.3.1 カメラ映像表示エリア実装（最初はダミー表示）
- [ ] 8.3.2 カメラオン/オフ切り替えボタン実装
- [ ] 8.3.3 省電力モードオン/オフ切り替え実装
- [ ] 8.3.4 検出状況の表示実装（ダミーデータで動作）
- [ ] 8.3.5 各カテゴリーの計測時間表示（リアルタイム更新）
- [ ] 8.3.6 目標達成率バーの実装
- [ ] 8.3.7 終了ボタン実装
- [ ] 8.3.8 タイマー機能の実装（秒単位で更新）

### 8-4. トラッキング終了画面
- [ ] 8.4.0 終了画面要件分析（既存UI確認・必要な表示要素把握）
- [ ] 8.4.1 各カテゴリーの集計時間表示
- [ ] 8.4.3 集中/非集中の区別表示（将来実装用）
- [ ] 8.4.4 目標達成状況の表示（±何%）
- [ ] 8.4.5 総合計集中時間の増加表示
- [ ] 8.4.6 開始-終了時刻の表示
- [ ] 8.4.7 コメント入力フォーム実装
- [ ] 8.4.8 フレンド共有チェックボックス実装（将来実装用、非表示）
- [ ] 8.4.9 OKボタン実装
- [ ] 8.4.10 OKボタン押下時の全処理実行

### 8-5. トラッキング画面の統合
- [ ] 8.5.1 画面遷移の実装（ホーム→設定→トラッキング中→終了）
- [ ] 8.5.2 状態管理の統合
- [ ] 8.5.3 トラッキング画面の総合テスト

---

## Phase 9: UI実装 - 設定画面

### 9-1. プロフィール画面
- [ ] 9.1.0 プロフィール画面要件分析（既存UI確認・必要な表示要素把握）
- [ ] 9.1.1 アイコン表示実装
- [ ] 9.1.2 ユーザー名表示実装
- [ ] 9.1.3 フォロー・フォロワー数表示（将来実装用、非表示）
- [ ] 9.1.4 各設定項目への遷移ボタン実装

### 9-2. 通知設定画面
- [ ] 9.2.0 通知設定画面要件分析（既存UI確認・必要な設定項目把握）
- [ ] 9.2.1 通知全体のオン/オフスイッチ実装
- [ ] 9.2.2 朝の通知時間設定UI実装（TimePicker）
- [ ] 9.2.3 夜の通知時間設定UI実装（TimePicker）
- [ ] 9.2.4 朝の通知オン/オフスイッチ実装
- [ ] 9.2.5 夜の通知オン/オフスイッチ実装
- [ ] 9.2.6 各通知項目のオン/オフスイッチ実装
- [ ] 9.2.7 通知設定の保存処理実装
- [ ] 9.2.8 通知設定画面の動作確認（Firestore接続）

### 9-3. 表示名・リセット時間設定画面
- [ ] 9.3.0 表示名設定画面要件分析（既存UI確認・必要な設定項目把握）
- [ ] 9.3.1 勉強の表示名入力フォーム実装
- [ ] 9.3.2 パソコンの表示名入力フォーム実装
- [ ] 9.3.3 スマホの表示名入力フォーム実装
- [ ] 9.3.4 リセット時間設定UI実装（TimePicker）
- [ ] 9.3.5 設定の保存処理実装
- [ ] 9.3.6 表示名設定画面の動作確認（Firestore接続・表示名反映確認）

### 9-4. アカウント設定画面
- [ ] 9.4.0 アカウント設定画面要件分析（既存UI確認・必要な設定項目把握）
- [ ] 9.4.1 アイコン変更機能実装（画像選択）
- [ ] 9.4.2 ユーザー名変更フォーム実装
- [ ] 9.4.3 ユーザー名重複チェック実装
- [ ] 9.4.4 自己紹介文入力フォーム実装
- [ ] 9.4.5 目標文章入力フォーム実装（将来実装用、非表示）
- [ ] 9.4.6 メールアドレス連携実装（将来実装）
- [ ] 9.4.7 アカウント設定の保存処理実装
- [ ] 9.4.8 アカウント設定画面の動作確認（Firestore接続）

### 9-5. 設定画面の統合
- [ ] 9.5.1 プロフィールからの画面遷移実装
- [ ] 9.5.2 設定変更の反映確認
- [ ] 9.5.3 設定画面の総合テスト

---

## Phase 10: イベント表示機能

### 10-1. イベント表示画面の実装
- [ ] 10.1.0 イベント表示画面要件分析（各イベントタイプの表示内容把握）
- [ ] 10.1.1 目標達成イベント画面実装
- [ ] 10.1.2 目標設定イベント画面実装
- [ ] 10.1.3 目標期間終了イベント画面実装
- [ ] 10.1.4 継続日数大台イベント画面実装
- [ ] 10.1.5 集中時間大台イベント画面実装
- [ ] 10.1.6 カウントダウン終了イベント画面実装
- [ ] 10.1.7 カウントダウン設定イベント画面実装
- [ ] 10.1.8 各イベント画面の動作確認（Firestore接続・イベント発生時表示）

### 10-2. イベント表示のトリガー実装
- [ ] 10.2.1 トラッキング終了時のイベントチェック
- [ ] 10.2.2 目標設定時のイベント表示
- [ ] 10.2.3 カウントダウン設定時のイベント表示
- [ ] 10.2.4 カウントダウン終了時のイベント表示
- [ ] 10.2.5 複数イベント同時発生時の表示順制御

### 10-3. SNS共有機能（基本実装）
- [ ] 10.3.1 フレンド共有オン/オフスイッチ実装（将来実装用、非表示）
- [ ] 10.3.2 LINE共有ボタン実装（将来実装）
- [ ] 10.3.3 Instagram共有ボタン実装（将来実装）
- [ ] 10.3.4 リンクコピーボタン実装（将来実装）

---

## Phase 11: AI統合（後回し、最後に実装）

### 11-1. カメラ機能の実装
- [ ] 11.1.1 カメラライブラリの選定（camera plugin等）
- [ ] 11.1.2 カメラ初期化処理実装
- [ ] 11.1.3 カメラプレビュー表示実装
- [ ] 11.1.4 内カメ/外カメ切り替え実装
- [ ] 11.1.5 カメラのオン/オフ切り替え実装

### 11-2. TensorFlow Lite統合
- [ ] 11.2.1 TensorFlow Lite Flutterパッケージ導入
- [ ] 11.2.2 モデルファイルの配置（assets/）
- [ ] 11.2.3 モデルの読み込み処理実装
- [ ] 11.2.4 画像の前処理実装（リサイズ、正規化）
- [ ] 11.2.5 推論処理の実装

### 11-3. 多ラベル分類の実装
- [ ] 11.3.1 検出対象の定義（人、本、ペン、ノート、パソコン、キーボード、マウス、スマホ）
- [ ] 11.3.2 推論結果の解析処理実装
- [ ] 11.3.3 カテゴリー判定ロジック実装（検出物→カテゴリー）
- [ ] 11.3.4 複数検出時の優先順位処理実装
- [ ] 11.3.5 検出タイミングの制御（リアルタイム or 数秒ごと）
- [ ] 11.3.6 省電力モードの実装

### 11-4. リアルタイム検出の実装
- [ ] 11.4.1 カメラフレームの定期取得実装
- [ ] 11.4.2 検出結果の状態管理実装
- [ ] 11.4.3 カテゴリー別時間の自動計測実装
- [ ] 11.4.4 UIへの検出状況反映実装
- [ ] 11.4.5 検出結果の視覚的フィードバック実装

### 11-5. 姿勢推定の統合（将来実装）
- [ ] 11.5.1 姿勢推定モデルの導入
- [ ] 11.5.2 手の動き検出実装
- [ ] 11.5.3 体の姿勢検出実装
- [ ] 11.5.4 寝落ち判定実装

### 11-6. 視線推定の統合（将来実装）
- [ ] 11.6.1 視線推定モデルの導入
- [ ] 11.6.2 視線方向の検出実装
- [ ] 11.6.3 目の開閉検出実装

### 11-7. 集中判定の実装（将来実装）
- [ ] 11.7.0 集中判定要件分析（3つのAI結果統合方法・判定基準の仕様把握）
- [ ] 11.7.1 集中判定アルゴリズム実装
- [ ] 11.7.2 集中時間と非集中時間の分離実装
- [ ] 11.7.3 集中判定のチューニング
- [ ] 11.7.4 トラッキング画面で集中判定の動作確認（実時間での判定動作）

---

## Phase 12: デザイン調整

### 12-1. 全画面のデザイン統一
- [ ] 12.1.1 カラーテーマの統一
- [ ] 12.1.2 フォントの統一
- [ ] 12.1.3 余白・パディングの統一
- [ ] 12.1.4 ボタンスタイルの統一
- [ ] 12.1.5 カードスタイルの統一

### 12-2. アニメーション追加
- [ ] 12.2.1 画面遷移アニメーション実装
- [ ] 12.2.2 グラフのアニメーション調整
- [ ] 12.2.3 ボタンタップアニメーション実装
- [ ] 12.2.4 ローディングアニメーション実装
- [ ] 12.2.5 イベント表示のアニメーション実装

### 12-3. レスポンシブ対応
- [ ] 12.3.1 各画面のレスポンシブレイアウト実装
- [ ] 12.3.2 タブレット対応
- [ ] 12.3.3 横画面対応
- [ ] 12.3.4 各デバイスでの表示確認

### 12-4. アクセシビリティ対応
- [ ] 12.4.1 セマンティクス追加
- [ ] 12.4.2 フォントサイズ対応
- [ ] 12.4.3 色覚対応の確認
- [ ] 12.4.4 キーボードナビゲーション対応

---

## Phase 13: プラットフォーム対応

### 13-1. Web（Chrome）対応
- [ ] 13.1.1 Web向けの最適化
- [ ] 13.1.2 Chromeでの動作確認
- [ ] 13.1.3 Webでのカメラ動作確認
- [ ] 13.1.4 Webでのファイルアップロード確認
- [ ] 13.1.5 パフォーマンステスト（Web）

### 13-2. iOS対応
- [ ] 13.2.1 iOS向けのビルド設定
- [ ] 13.2.2 iOSでの動作確認
- [ ] 13.2.3 iOSカメラ権限の実装
- [ ] 13.2.4 iOS通知の実装
- [ ] 13.2.5 App Storeの準備（将来）
- [ ] 13.2.6 パフォーマンステスト（iOS）

### 13-3. Android対応
- [ ] 13.3.1 Android向けのビルド設定
- [ ] 13.3.2 Androidでの動作確認
- [ ] 13.3.3 Androidカメラ権限の実装
- [ ] 13.3.4 Android通知の実装
- [ ] 13.3.5 Google Playの準備（将来）
- [ ] 13.3.6 パフォーマンステスト（Android）

---

## Phase 14: 最終調整・リリース準備

### 14-1. バグ修正
- [ ] 14.1.1 既知のバグリストアップ
- [ ] 14.1.2 各バグの修正
- [ ] 14.1.3 修正後の動作確認

### 14-2. パフォーマンス最適化
- [ ] 14.2.1 Firestoreクエリの最適化
- [ ] 14.2.2 不要なrebuildの削減
- [ ] 14.2.3 画像の最適化
- [ ] 14.2.4 キャッシュ戦略の最適化

### 14-3. セキュリティチェック
- [ ] 14.3.1 認証情報の保護確認
- [ ] 14.3.2 API Keyの保護確認
- [ ] 14.3.3 ユーザーデータの保護確認
- [ ] 14.3.4 Firestore Rulesの設定

### 14-4. 総合テスト
- [ ] 14.4.1 全機能の動作確認
- [ ] 14.4.2 各プラットフォームでの動作確認
- [ ] 14.4.3 エラーケースの確認
- [ ] 14.4.4 パフォーマンステスト

### 14-5. ドキュメント作成
- [ ] 14.5.1 ユーザーマニュアル作成
- [ ] 14.5.2 開発ドキュメント更新
- [ ] 14.5.3 API仕様書作成（将来のフレンド機能用）

### 14-6. リリース
- [ ] 14.6.1 リリースビルドの作成
- [ ] 14.6.2 ストアの申請準備（将来）
- [ ] 14.6.3 リリースノートの作成

---

## 将来実装機能（今は作らない）

### タグ機能
- [ ] タグデータモデル作成
- [ ] タグDataManager作成
- [ ] タグ追加UI実装
- [ ] タグ別時間計測実装
- [ ] タグ目標設定機能実装

### フレンド機能
- [ ] ユーザー検索機能実装
- [ ] フォロー・フォロワー機能実装
- [ ] タイムライン実装
- [ ] トラッキング結果共有実装
- [ ] いいね・コメント機能実装
- [ ] フレンドイベント表示実装

### 記事・探す機能
- [ ] 記事データモデル作成
- [ ] 記事一覧表示実装
- [ ] 記事詳細表示実装
- [ ] 検索機能実装
- [ ] カテゴリーフィルター実装

### 課金システム
- [ ] In-App Purchase統合
- [ ] サブスクリプション実装
- [ ] 無料版の機能制限実装
- [ ] 有料版の機能解放実装
- [ ] 広告SDK統合
- [ ] バナー広告実装
- [ ] ネイティブ広告実装

---

## 進捗管理

### チェックリストの使い方
1. タスク完了時に`[ ]`を`[x]`に変更
2. 各Phaseの完了率を確認
3. 問題発生時はタスクの横にメモを追加

### 現在の状態
- **Phase 0**: 進行中（0.1-0.2完了、0.3以降実施中）
- **Phase 1**: 未着手
- **Phase 2**: 未着手
- **Phase 3**: 未着手

### 推定所要時間（設計フェーズ削除後）
- Phase 0（リファクタリング）: 3-5日
- Phase 1-2（データモデル・Manager作成）: 8-12日
- Phase 3（実データ動作確認）: 3-5日
- Phase 4（計算ロジック）: 5-8日
- Phase 5（Provider）: 4-6日
- Phase 6-10（UI実装）: 18-25日
- Phase 11（AI統合）: 8-12日
- Phase 12-13（デザイン・プラットフォーム）: 8-12日
- Phase 14（最終調整）: 4-6日

**合計推定: 61-91日**（約2-3ヶ月）

**削減効果**: 設計フェーズ削除により約16-20日短縮

---

## 注意事項

### 必ず守ること
- 一気にコーディングしない（段階的実装）
- 各タスク完了後に動作確認
- `flutter analyze`でエラー0を維持
- 重複コード発見時は即座に抽象化
- ファイルサイズ300行超えたら分割

### タスクの追加・変更
- 新しいタスクが必要になったら随時追加
- 優先順位が変わったら順序を変更
- 不要になったタスクは削除またはコメントアウト

### 質問・相談
- 不明点があれば実装前に必ず確認
- より良い実装方法があれば提案
- 問題発見時は即座に指摘

---

このタスクリストは生きたドキュメントです。
プロジェクトの進行に合わせて随時更新してください。

