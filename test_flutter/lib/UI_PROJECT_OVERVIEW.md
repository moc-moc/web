# UI実装プロジェクト概要

このファイルは、Focus Tracker アプリのUI実装に特化したプロジェクト概要です。
バックエンド機能は考慮せず、すべてダミーデータで動作する美しいUIの構築を目指します。

---

## アプリケーション概要

### アプリ名
**Focus Tracker**（仮称）- 作業時間自動計測・管理アプリ

### UI実装の目的
- 美しく統一感のあるダークモードUIの構築
- ダミーデータで動作する完全な画面遷移フロー
- デザインシステムに基づいた再利用可能なコンポーネント
- スムーズなアニメーションとインタラクション
- モバイルファーストのレスポンシブデザイン

---

## UI実装の基本方針

### 1. デザインシステム優先
- **カラー管理**: すべての色は`core/theme.dart`で中央管理
- **コンポーネント管理**: すべてのUIパーツは`presentation/widgets/`で管理
- **統一感**: 角丸、余白、ボタンスタイルを統一
- **再利用性**: DRY原則に従い、重複を避ける

### 2. ダミーデータ駆動
- すべてのデータはダミーデータ（`lib/dummy_data/`）
- バックエンド機能は一切実装しない
- 画面遷移は自由にテスト可能
- イベント画面も条件なしで直接表示可能

### 3. ダークモード優先
- 主要カラー: 濃いグレー背景、白テキスト
- アクセントカラー: 青（プライマリ）、緑、紫、黄色、赤
- ライトモードは将来実装

### 4. モバイルファースト
- まずはモバイル（iPhone）向けに最適化
- 将来的にタブレット、Web、デスクトップに対応

### 5. 段階的実装
- デザインシステム構築 → 共通コンポーネント → 画面実装 → デザイン調整
- 一気にコーディングせず、細かいステップに区切る
- 各ステップで動作確認

---

## デザインシステム仕様

### カラーパレット

#### 基本色
- **Blue**: `#60A5FA` - プライマリアクション
- **Purple**: `#9E66D5` - セカンダリアクション
- **Green**: `#49DE80` - 成功、継続日数
- **Yellow**: `#FCCE15` - 警告、スマホカテゴリ
- **Red**: `#F87171` - エラー、終了ボタン
- **Black Gray**: `#1F2937` - 濃いグレー
- **Black**: `#101C22` - 最も濃い背景
- **White**: `#D6D8D9` - テキスト
- **Gray**: `#737F97` - セカンダリテキスト

#### 背景色
- **Background Primary**: `#1F2937` - メイン背景
- **Background Secondary**: `#111827` - より濃い背景
- **Background Card**: `#374151` - カード背景

#### テキスト色
- **Text Primary**: `#FFFFFF` - メインテキスト
- **Text Secondary**: `#9CA3AF` - サブテキスト
- **Text Disabled**: `#6B7280` - 無効テキスト

#### グラフ色
- **Study**: `#FF8C42` - 勉強（オレンジ）
- **Study Focused**: `#FF6B1A` - 勉強集中（濃いオレンジ）
- **PC**: `#14B8A6` - パソコン（青緑）
- **PC Focused**: `#0D9488` - パソコン集中（濃い青緑）
- **Smartphone**: `#FCCE15` - スマホ（黄色）
- **Person Only**: `#86EFAC` - 人のみ（明るい緑）
- **Nothing Detected**: `#737F97` - 検出なし（灰色）

### 標準値定義

#### 角丸（Border Radius）
- **Small**: 8.0 - 小さなボタン、チップ
- **Medium**: 12.0 - 通常のボタン、カード
- **Large**: 16.0 - 大きなカード、ダイアログ

#### 余白（Spacing）
- **XS**: 4.0
- **SM**: 8.0
- **MD**: 16.0
- **LG**: 24.0
- **XL**: 32.0
- **XXL**: 48.0

#### テキストスタイル
- **H1**: 32px, Bold - 大見出し
- **H2**: 24px, Bold - 中見出し
- **H3**: 20px, Bold - 小見出し
- **Body1**: 16px - 通常テキスト
- **Body2**: 14px - 小さいテキスト
- **Caption**: 12px - キャプション
- **Overline**: 10px, Letter Spacing 1.5 - オーバーライン

### 共通コンポーネント

#### ボタン
1. **Primary Button**: 青背景、白文字（メインアクション）
2. **Secondary Button**: グレー背景、白文字（サブアクション）
3. **Outline Button**: 枠線のみ、透明背景（キャンセル）
4. **Text Button**: 枠線なし、テキストのみ（戻る、スキップ）

各サイズ: Large / Medium / Small

#### カード
1. **Standard Card**: 通常の情報表示
2. **Gradient Card**: イベント画面用（グラデーション背景）
3. **Interactive Card**: タップ可能（目標選択など）
4. **Stat Card**: 統計表示用

#### その他
- 入力フィールド（テキスト/日付/時間）
- プログレスバー（円形/線形）
- トグルスイッチ
- チップ/タグ
- ダイアログ
- タブバー
- グラフウィジェット（fl_chart使用）

---

## 画面構成

### 画面一覧（全23画面）

#### Phase 4: 初期画面・認証UI（3画面）
1. **サインアップ/ログイン画面**
2. **初期設定画面**
3. **初期目標設定画面**

#### Phase 5: ホーム画面UI（1画面）
4. **ホーム画面**

#### Phase 6: トラッキング画面UI（3画面）
5. **トラッキング設定画面**
6. **トラッキング中画面**
7. **トラッキング終了画面**

#### Phase 7: 目標画面UI（1画面 + 3ダイアログ）
8. **目標一覧画面**
- 目標設定ダイアログ
- 目標編集ダイアログ
- カウントダウン設定ダイアログ

#### Phase 8: レポート画面UI（1画面）
9. **レポート画面**

#### Phase 9: 設定画面UI（6画面）
10. **プロフィール/メイン設定画面**
11. **アカウント設定画面**
12. **通知設定画面**
13. **表示名・リセット時間設定画面**
14. **サブスクリプション画面**
15. **イベントプレビュー画面**

#### Phase 10: イベント表示画面UI（7画面）
16. **目標達成イベント画面**
17. **目標設定完了イベント画面**
18. **目標期間終了イベント画面**
19. **連続日数大台イベント画面**
20. **総時間大台イベント画面**
21. **カウントダウン終了イベント画面**
22. **カウントダウン設定完了イベント画面**（未実装）

---

## 主要画面の詳細

### 1. サインアップ/ログイン画面
**目的**: 初回訪問時の認証フロー

**主要UI要素**:
- タブ切り替え（Sign Up / Log In）
- Sign with Apple ボタン
- Sign with Google ボタン
- メールアドレス入力フィールド
- ユーザー名入力フィールド
- パスワード入力フィールド
- パスワード確認入力フィールド
- Create Account / Log In ボタン
- Already have an account? Log In リンク

**遷移先**: 初期設定画面 or ホーム画面

---

### 2. 初期設定画面
**目的**: ユーザープロフィール初期設定

**主要UI要素**:
- 生年月日ドロップダウン
- 性別選択
- 利用目的チェックボックス
  - Study, Qualification, Work, Time Management, Hobby, Other
- 次へボタン

**遷移先**: 初期目標設定画面

---

### 3. 初期目標設定画面
**目的**: 初回目標設定（スキップ可能）

**主要UI要素**:
- 「Set Your Goals!」セクション
- 簡易版目標設定フォーム
- Get Started ボタン
- Skip for now ボタン

**遷移先**: ホーム画面

---

### 4. ホーム画面
**目的**: アプリのメイン画面、トラッキング開始点

**主要UI要素**:
- プロフィールアイコン（左上）
- 設定ボタン（右上）
- 総合計集中時間表示（大きく）
- 継続日数表示
- 今日の目標表示セクション
  - 各目標の進捗バー
- スタートボタン（大きく目立つ）
- ボトムナビゲーションバー（Home/Goal/Report）

**遷移先**: 
- プロフィールアイコン → プロフィール/メイン設定画面
- スタートボタン → トラッキング設定画面
- ナビゲーションバー → 目標画面、レポート画面

---

### 5. トラッキング設定画面
**目的**: トラッキング開始前の設定

**主要UI要素**:
- 戻るボタン
- プロフィールアイコン
- タグ一覧セクション（将来実装用、非表示）
- スタートボタン

**遷移先**: トラッキング中画面

---

### 6. トラッキング中画面
**目的**: リアルタイムトラッキング

**主要UI要素**:
- カメラ映像表示エリア（ダミー画像/プレースホルダー）
- カメラオン/オフ切り替えボタン
- 省電力モード切り替えボタン
- 検出状況表示（ダミーデータ）
- 各カテゴリーの計測時間表示（リアルタイム更新風）
  - 勉強時間
  - パソコン時間
  - スマホ時間
  - 人のみ時間
  - 検出なし時間
- 目標達成率バー
- 終了ボタン

**遷移先**: トラッキング終了画面

---

### 7. トラッキング終了画面
**目的**: トラッキング結果表示

**主要UI要素**:
- 各カテゴリーの集計時間表示
- 目標達成状況表示（±何%）
- 総合計集中時間の増加表示
- 開始-終了時刻の表示
- SNSシェアボタン（UIのみ、機能は将来実装）
- OKボタン

**遷移先**: ホーム画面（イベント発生時はイベント画面経由）

---

### 8. 目標一覧画面
**目的**: 目標の表示・管理

**主要UI要素**:
- 挨拶文（「Good morning, Alex!」）
- 継続日数バッジ（右上）
- やる気の出る名言ランダム表示
- カウントダウン表示セクション
  - イベント名
  - 残り日数/時間/分/秒
- 目標カードリスト
  - 目標タイトル
  - 目標時間と現在の進捗
  - 円形プログレスバー（達成率）
  - 期間タイプと残り日数
  - 連続達成回数
- 右下の＋ボタン（目標追加）
- ボトムナビゲーションバー

**ダイアログ**:
- 目標設定ダイアログ
- 目標編集ダイアログ
- カウントダウン設定ダイアログ

**遷移先**: 目標編集ダイアログ、設定ダイアログ

---

### 9. レポート画面
**目的**: トラッキングデータの可視化

**主要UI要素**:
- 期間切り替えタブ（Day/Week/Month/Year）
- 日付選択（< October 2023 >）
- 統計サマリー
  - Total Focused Work（増減表示）
  - Consecutive Days（増減表示）
- 棒グラフ
  - 1日: 0-24時
  - 1週間: 7日分
  - 1ヶ月: 30日分
  - 1年: 12ヶ月分
  - カテゴリー別の色分け
- 円グラフ
  - カテゴリー別割合
  - 中央に合計時間表示
  - 凡例表示
- カテゴリー内訳リスト
  - PC (Focused/Unfocused)
  - Study (Focused/Unfocused)
  - Smartphone
  - People
- ボトムナビゲーションバー

---

### 10. プロフィール/メイン設定画面
**目的**: 設定のハブ画面

**主要UI要素**:
- 戻るボタン
- プロフィールアイコン
- ユーザー名表示
- フォロー・フォロワー数（将来実装用、非表示）
- 設定項目リスト
  - 通知設定
  - リセット時間設定
  - アカウント設定
  - 表示名設定
  - サブスクライブ
  - 問い合わせ
  - **イベントプレビュー**

**遷移先**: 各設定画面

---

### 11-14. 各設定画面
詳細は省略（アカウント、通知、表示名、サブスクリプション）

---

### 15. イベントプレビュー画面
**目的**: 全イベント画面へのテストアクセス

**主要UI要素**:
- イベント一覧リスト
  - 目標達成イベント
  - 目標設定完了イベント
  - 目標期間終了イベント
  - 連続日数大台イベント（7日、10日、100日等）
  - 総時間大台イベント（1000時間等）
  - カウントダウン終了イベント

**遷移先**: 各イベント画面

---

### 16-22. イベント表示画面
**目的**: 達成・イベント発生時の祝福画面

**共通UI要素**:
- グラデーション背景（イベントごとに異なる色）
- タイトル
- メッセージ
- アイコン/数値表示
- SNSシェアボタン（UIのみ）
- OKボタン

**イベント別の特徴**:
- **目標達成**: 紫色グラデーション、目標名、タグ表示
- **目標設定完了**: 青色グラデーション、トロフィーアイコン
- **目標期間終了**: ピンク色グラデーション、達成率表示
- **連続日数大台**: 青色背景、大きな数字
- **総時間大台**: 黄色グラデーション、大きな数字
- **カウントダウン終了**: カスタム背景、イベント名

---

## 画面遷移フロー

### メインフロー
```
サインアップ/ログイン
    ↓
初期設定
    ↓
初期目標設定（スキップ可能）
    ↓
ホーム画面 ←→ 目標画面 ←→ レポート画面
    ↓           (ナビゲーションバー)
トラッキング設定
    ↓
トラッキング中
    ↓
トラッキング終了
    ↓
（イベント発生時: イベント画面）
    ↓
ホーム画面に戻る
```

### 設定フロー
```
ホーム画面（プロフィールアイコン）
    ↓
プロフィール/メイン設定
    ├→ アカウント設定
    ├→ 通知設定
    ├→ 表示名・リセット時間設定
    ├→ サブスクリプション
    └→ イベントプレビュー
            ├→ 各イベント画面
```

### 目標設定フロー
```
目標画面（＋ボタン）
    ↓
目標設定ダイアログ
    ↓
目標画面に戻る

目標画面（カードタップ）
    ↓
目標編集ダイアログ
    ↓
目標画面に戻る
```

---

## ボトムナビゲーションバー

### 3項目構成
1. **Home** - ホーム画面
2. **Goal** - 目標画面
3. **Report** - レポート画面

### 将来実装予定（現在は非表示）
- **Friend** - フレンド機能
- **Search** - 検索機能

---

## ダミーデータ仕様

### ユーザーデータ
- **名前**: Alex Doe
- **ユーザーID**: @alex_doe
- **継続日数**: 65 Days
- **総合計集中時間**: 300 Hours
- **総ログイン日数**: 120 Days

### 目標データ
複数の目標（4-5個）:
1. **Study**: 2時間/週、進捗75%、2日残り
2. **Computer**: 5時間/月、進捗40%、2週間残り、集中時間のみ
3. **Smartphone**: 1時間/週、進捗60%、6日残り、以下
4. **Work**: 40時間/月、進捗50%

### カウントダウンデータ
- **イベント名**: Mid-term Exams
- **残り**: 15日12時間30分45秒

### トラッキングセッションデータ
- **開始時刻**: 例 14:30
- **終了時刻**: 例 16:45
- **総時間**: 2時間15分
- **カテゴリー別時間**: 
  - 勉強: 1時間30分
  - パソコン: 30分
  - スマホ: 10分
  - 人のみ: 5分
  - 検出なし: 0分

### レポートデータ
各期間（Day/Week/Month/Year）ごとのグラフ用データ

---

## グラフ実装仕様

### 使用ライブラリ
**fl_chart** - 軽量で高速、MITライセンス（完全無料）

### 棒グラフ
- **横軸**: 時間帯（1日: 0-24時、1週間: 7日分、等）
- **縦軸**: 時間
- **色分け**: カテゴリー別（AppChartColorsを使用）
- **アニメーション**: 登場時にアニメーション
- **インタラクション**: タップで詳細表示

### 円グラフ
- **カテゴリー別割合**: 各カテゴリーの比率
- **中央表示**: 合計時間
- **凡例**: ChartLegendで表示
- **色分け**: カテゴリー別
- **アニメーション**: 回転アニメーション

---

## アニメーション仕様

### 画面遷移アニメーション
- **スライド**: 左から右、下から上
- **フェード**: 透明度変化
- **スケール**: 拡大縮小
- **期間**: 300-400ms（適度な速度）

### グラフアニメーション
- **棒グラフ**: 下から上に伸びる
- **円グラフ**: 時計回りに描画
- **期間**: 800-1000ms（ゆっくり）

### ボタンタップエフェクト
- **スケール変化**: 0.95倍に縮小
- **透明度変化**: 0.8に減少
- **期間**: 100-200ms（瞬時）

### その他
- **トグルスイッチ**: スライドアニメーション
- **プログレスバー**: カウントアップアニメーション
- **数値表示**: カウントアップアニメーション

---

## 実装優先順位

### Phase 0: デザインシステム構築（最優先）
- カラーパレット拡張
- 標準値定義
- fl_chartパッケージ追加

### Phase 1: 共通コンポーネント作成（優先度A）
- ボタン、カード、入力フィールド
- プログレスバー、トグル、チップ
- ダイアログ、タブバー、グラフウィジェット

### Phase 2: ナビゲーション・レイアウト（優先度A）
- ボトムナビゲーションバー
- 共通アプリバー、レイアウト構造

### Phase 3: ダミーデータ準備（優先度A）
- 全ダミーデータ作成

### Phase 4-10: 各画面UI実装（優先度B）
- 初期画面・認証UI
- ホーム画面
- トラッキング画面
- 目標画面
- レポート画面
- 設定画面
- イベント表示画面

### Phase 11: デザイン調整・アニメーション（優先度C）
- 画面遷移アニメーション
- グラフアニメーション
- 最終デザイン調整

---

## 将来実装機能（今回は作らない）

### フレンド機能
- ユーザー検索・フォロー
- タイムライン表示
- トラッキング結果共有
- いいね・コメント機能

### 記事・探す機能
- モチベーション記事
- PR広告混在のフィード

### タグ機能
- カテゴリーごとに複数のタグを設定
- タグ別時間計測

### AI統合
- カメラでの実際の物体検出
- 姿勢推定
- 視線推定
- 集中判定

### 課金システム
- サブスクリプション機能
- 広告表示

### その他
- コメント機能（イベント画面）
- 実際のSNS共有機能
- メール認証機能
- プッシュ通知

---

## 技術仕様

### フレームワーク
- **Flutter** - クロスプラットフォーム開発

### 状態管理
- **Riverpod** - 状態管理（Provider）

### UI/グラフ
- **fl_chart** - グラフ描画

### データ
- **ダミーデータ** - すべてローカルのダミーデータで動作

### プラットフォーム
- **モバイル優先** - まずはiPhone向け
- **将来対応**: タブレット、Web、デスクトップ

---

## デザイン原則

### 1. 統一感
- 同じコンポーネントを再利用
- カラー、角丸、余白を統一
- テキストスタイルを統一

### 2. シンプルさ
- 過度な装飾を避ける
- 必要な情報のみを表示
- わかりやすいアイコンとラベル

### 3. 美しさ
- 適度な余白
- バランスの取れたレイアウト
- スムーズなアニメーション

### 4. 使いやすさ
- 大きなタップターゲット
- 明確なフィードバック
- 直感的な操作

### 5. パフォーマンス
- スムーズな60fps
- 高速な画面遷移
- 効率的なレンダリング

---

## 注意事項

### 必ず守ること
- **デザインシステムの厳守**: theme.dartとwidgets/のコンポーネントを使用
- **段階的実装**: 一気にコーディングせず細かく区切る
- **動作確認**: 各ステップで実際に画面を表示して確認
- **ファイルサイズ**: 150-200行目標、最大300行、超えたら分割
- **統一感**: 角丸、余白、ボタンスタイルを統一

### 積極的に行うこと
- **提案**: デザイン改善、コンポーネント追加を遠慮なく提案
- **質問**: 不明点、曖昧な仕様は積極的に質問
- **早期発見**: 問題はできるだけ早く指摘
- **動作確認**: 各ステップで実際に画面を確認

### バックエンド機能は考慮しない
- データ保存機能は実装しない
- 認証機能は実装しない（UIのみ）
- ネットワーク通信は実装しない
- すべてダミーデータで動作

---

## 参考ファイル

### 既存の実装
- `lib/core/theme.dart` - カラー定義
- `lib/presentation/widgets/buttons.dart` - ボタンコンポーネント
- `lib/presentation/widgets/cards.dart` - カードコンポーネント
- `lib/presentation/widgets/navigation.dart` - ナビゲーション
- `lib/presentation/widgets/settings_widgets.dart` - 設定ウィジェット

### タスクリスト
- `lib/UI_IMPLEMENTATION_TASKS.md` - 詳細な実装タスクリスト

### プロジェクト概要
- `lib/PROJECT_OVERVIEW.md` - 全体のプロジェクト概要（バックエンド含む）

### ルール
- `lib/rules` - 開発ルールとガイドライン

---

## 推定所要時間

- **Phase 0**: デザインシステム構築 - 1-2日
- **Phase 1**: 共通コンポーネント作成 - 3-5日
- **Phase 2**: ナビゲーション・レイアウト - 1-2日
- **Phase 3**: ダミーデータ準備 - 1日
- **Phase 4-10**: 各画面UI実装 - 21-31日
- **Phase 11**: デザイン調整・アニメーション - 3-5日

**合計: 約1-1.5ヶ月**

---

このプロジェクトは、美しく統一感のあるUIの構築に集中します。
バックエンド機能は将来のフェーズで統合予定です。

**重要**: すべてダミーデータで動作するため、画面遷移とUIの確認に集中し、
デザインシステムに基づいた再利用可能なコンポーネントを構築しましょう！

